{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/script.js","webpack://exports/external \"sketch\"","webpack://exports/external \"sketch/dom\"","webpack://exports/external \"sketch/settings\"","webpack://exports/external \"sketch/ui\"","webpack://exports/external \"util\""],"names":["require","toArray","UI","Group","pluginKey","arrowConnections","connectionsArray","document","sketch","fromNative","context","page","selectedPage","docData","documentData","pluginData","command","valueForKey_onLayer_forPluginIdentifier","currentParentGroup","currentPage","currentArtboard","selection","currentGroup","lineObject","sourceObject","Settings","arrowDirectionSetting","settingForKey","checkForArrowGroup","count","firstObject","g","objectID","createArrow","message","updateArrows","getConnectionsFromPluginData","log","updateArrowsCounter","length","i","updateArrow","secondObject","direction","line","cleanArrows","ungroup","setValue_forKey_onLayer_forPluginIdentifier","settings","alert","COSAlertWindow","new","setMessageText","addButtonWithTitle","viewWidth","viewHeight","view","NSView","alloc","initWithFrame","NSMakeRect","addAccessoryView","infoLabel","NSTextField","setStringValue","setSelectable","setDrawsBackground","setBezeled","addSubview","arrowDirectionField","NSPopUpButton","setActiveDirectionSetting","modalResponse","runModal","NSAlertFirstButtonReturn","setSettingForKey","views","subviews","title","firstObjectID","secondObjectID","lineID","getLayerWithID","remove","getDirection","drawLine","addToArrowsGroup","connection","push","layers","name","firstObjectByID","secondObjectByID","firstObjectByIDMidX","frame","x","width","firstObjectByIDMidY","y","height","secondObjectByIDMidX","secondObjectByIDMidY","diffX","diffY","absDiffX","Math","abs","absDiffY","firstLayerPosX","firstLayerPosY","secondLayerPosX","secondLayerPosY","middlePosX","middlePosY","path","NSBezierPath","bezierPath","moveToPoint","NSMakePoint","lineToPoint","MSShapeGroup","layerWithPath","MSPath","pathWithBezierPath","points","cornerRadius","setName","border","style","addStylePartOfType","color","MSColor","colorWithRGBADictionary","r","b","a","thickness","endMarkerType","addLayers","group","parent","locked","moveToBack","currentDirection","addItemWithTitle","lastItem","setState"],"mappings":"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","file":"script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/script.js\");\n","import sketch from 'sketch'\nconst { toArray } = require('util')\n\n//\n//  Variables\n//\n\nlet UI = require('sketch/ui') \nlet Group = require('sketch/dom').Group\nconst pluginKey = \"flowArrows\"\nlet arrowConnections = []\nlet connectionsArray = []\nconst document = sketch.fromNative(context.document)\nconst page = document.selectedPage\nlet docData = context.document.documentData()\nlet pluginData = context.command.valueForKey_onLayer_forPluginIdentifier(\"arrowConnections\", docData, pluginKey)\nlet currentParentGroup = docData.currentPage().currentArtboard() || docData.currentPage()\nlet selection = context.selection\nlet currentGroup\n\nlet lineObject\nlet sourceObject // currently Sketch can't provide really firsrt selection\n\n// Settings\nvar Settings = require('sketch/settings')\nlet arrowDirectionSetting = Settings.settingForKey('arrowDirection')\n\n\n//\n//  Default Function\n//\n\nexport default function(context) {\n\n  // Check if we have \"Arrows\" group\n  currentGroup = checkForArrowGroup()\n\n  //Check if we have more than one selection\n  if(selection.count() > 1){\n    // When user selected more than one layer\n    \n    // Need to define source object first\n    sourceObject = selection.firstObject()\n  \n    // if there is a line in Plugin Database, we are showing it\n    // lineObject = checkConnections(firstObject,secondObject)\n\n    // Start\n    for(var g = 0; g < selection.count(); g++) {\n      if(selection[g].objectID() != sourceObject.objectID()){\n        createArrow(sourceObject, selection[g])\n      }\n    }\n    \n  } else {\n    // When user didn't select anything\n    sketch.UI.message(\"Please select more than two layers\")\n  }\n}\n\n//\n// Plugin Commands\n//\n\nexport function updateArrows(context) {\n  // TODO: Need to show amount of updated arrows and deleted ones\n  // TODO: Need to make a function that will delete arrows and connection itself, if there is no object\n  // TODO: Need to go through all the connections and check if we have all the object\n  getConnectionsFromPluginData()\n  // TODO: If there is no database, we need to clean everything. Don't forget about active artboard\n  log(connectionsArray)\n  const updateArrowsCounter = connectionsArray.length\n  for (let i = 0; i < updateArrowsCounter; i ++) {\n    // Need to go through each connection and update arrow position\n    updateArrow(connectionsArray[i].firstObject, connectionsArray[i].secondObject, connectionsArray[i].direction, connectionsArray[i].line)\n  }\n  sketch.UI.message(\"All arrows are updated 🚀\")\n}\n\nexport function cleanArrows(context) {\n  const document = sketch.fromNative(context.document)\n  checkForArrowGroup()\n  currentGroup.ungroup()\n  context.command.setValue_forKey_onLayer_forPluginIdentifier(null, \"arrowConnections\", docData, pluginKey)\n  sketch.UI.message(\"All Connections are deleted 🎉\")\n}\n\nexport function settings(context) {\n  let alert = COSAlertWindow.new()\n\n  // TODO: Need to specify plugin icon\n  // alert.setIcon(NSImage.alloc().initByReferencingFile(plugin.urlForResourceNamed(\"icon.png\").path()))\n\n  // Title\n  alert.setMessageText(\"Arrow Plugin Settings\")\n  \n  // Creating dialog buttons\n  alert.addButtonWithTitle(\"Update Settings\")\n  alert.addButtonWithTitle(\"Cancel\")\n  \n  // Creating the view\n  const viewWidth = 300;\n  const viewHeight = 140;\n  \n  let view = NSView.alloc().initWithFrame(NSMakeRect(0, 0, viewWidth, viewHeight));\n  alert.addAccessoryView(view);\n  \n  // Label: Arrow Direction\n  var infoLabel = NSTextField.alloc().initWithFrame(NSMakeRect(-1, viewHeight - 17, 330, 20));\n\n  infoLabel.setStringValue(\"Arrow Direction\")\n  infoLabel.setSelectable(false);\n  infoLabel.setDrawsBackground(false);\n  infoLabel.setBezeled(false);\n\n  view.addSubview(infoLabel);\n\n\n  // Select: Arrow Direction\n  let arrowDirectionField = NSPopUpButton.alloc().initWithFrame(NSMakeRect(-2, viewHeight - 40, 300, 20));\n\n  // Add select options and mark selected the active one\n  setActiveDirectionSetting(arrowDirectionField)\n\n  view.addSubview(arrowDirectionField);\n\n\n  // Label: Auto Direction Desctiption\n  var infoLabel = NSTextField.alloc().initWithFrame(NSMakeRect(-1, viewHeight-84, 280, 40));\n\n  infoLabel.setStringValue(\"ℹ️ Auto mode will draw arrow based on location of the second object\")\n  infoLabel.setSelectable(false);\n  infoLabel.setDrawsBackground(false);\n  infoLabel.setBezeled(false);\n\n  view.addSubview(infoLabel);\n\n  // Show modal and get the results\n  let modalResponse = alert.runModal()\n\n  if(modalResponse == NSAlertFirstButtonReturn){\n    // When user clicks on \"Update Settings\"\n    // Need to save all this results into the Plugin Settings\n    Settings.setSettingForKey(\"arrowDirection\", alert.views()[0].subviews()[1].title())\n    UI.message(\"Settings are updated 🚀\")\n  }\n}\n\n//\n// Functions\n//\n\nfunction updateArrow(firstObjectID, secondObjectID, direction, lineID) {\n  currentGroup = checkForArrowGroup()\n  if(currentGroup){\n    // If we have already created group before\n    let firstObject = document.getLayerWithID(firstObjectID)\n    let secondObject = document.getLayerWithID(secondObjectID)\n    let lineObject = document.getLayerWithID(lineID)\n\n    if(firstObject && secondObject && lineObject){\n      \n      lineObject.remove()\n      // TODO When we are removing the line, need to remove this info from Sketch Plugin too\n      \n      let direction = getDirection(firstObjectID, secondObjectID)\n      let line = drawLine(firstObjectID, secondObjectID, direction)\n      \n      addToArrowsGroup(line)\n      getConnectionsFromPluginData()\n      \n      // Storage for current connection\n      let connection = {\n        firstObject : firstObjectID,\n        secondObject : secondObjectID,\n        direction: direction,\n        line : line.objectID()\n      }\n\n      connectionsArray.push(connection)\n\n      // Saving Connection Info to Sketch Plugin\n      context.command.setValue_forKey_onLayer_forPluginIdentifier(connectionsArray, \"arrowConnections\", docData, pluginKey)\n\n    } else {\n      // We don't have some of the object. Need to delete line if there is and connection from database\n    }\n\n  } else {\n    log(\"Else\")\n    // If we don't have \"Arrows\" group \n  }\n}\n\nfunction createArrow(firstObject, secondObject) {\n  // Process of creating new connection\n\n  const firstObjectID = firstObject.objectID()\n  const secondObjectID = secondObject.objectID()\n  let direction\n\n  // Need to understand the direction\n  // TODO: Because Sketch is not allowing to get order of selected elements, we will select elements based on it's ID (creation order)\n\n  if(Settings.settingForKey(\"arrowDirection\")){\n    // if there is data in settings\n    log(\"we have the settings\")\n    direction = Settings.settingForKey(\"arrowDirection\")  \n  } else {\n    direction = getDirection(firstObjectID, secondObjectID)\n  }\n    \n  let line = drawLine(firstObjectID, secondObjectID, direction)\n  addToArrowsGroup(line)\n  getConnectionsFromPluginData()\n  \n  // Storage for current connection\n  let connection = {\n    firstObject : firstObjectID,\n    secondObject : secondObjectID,\n    direction: direction,\n    line : line.objectID()\n  }\n\n  connectionsArray.push(connection)\n\n  // Saving Connection Info to Sketch Plugin\n  context.command.setValue_forKey_onLayer_forPluginIdentifier(connectionsArray, \"arrowConnections\", docData, pluginKey)\n  \n}\n\nfunction checkForArrowGroup() {\n  // Checking all the groups that we have\n  for(let i = 0; i < currentParentGroup.layers().count(); i++){\n    if(currentParentGroup.layers()[i].name() == \"Arrows\") {\n      // If we already have \"Arrow\" group we need to save it's folder\n      currentGroup = currentParentGroup.layers()[i]\n    } \n  }\n  return currentGroup\n}\n\nfunction getDirection(firstObjectID, secondObjectID){\n  // Get direction from the source object\n  const firstObjectByID = document.getLayerWithID(firstObjectID)\n  const secondObjectByID = document.getLayerWithID(secondObjectID)\n  const firstObjectByIDMidX = firstObjectByID.frame.x+firstObjectByID.frame.width/2\n  const firstObjectByIDMidY = firstObjectByID.frame.y+firstObjectByID.frame.height/2\n  const secondObjectByIDMidX = secondObjectByID.frame.x+secondObjectByID.frame.width/2\n  const secondObjectByIDMidY = secondObjectByID.frame.y+secondObjectByID.frame.height/2\n\n  const diffX = firstObjectByIDMidX - secondObjectByIDMidX\n  const diffY = firstObjectByIDMidY - secondObjectByIDMidY\n  const absDiffX = Math.abs(diffX) \n  const absDiffY = Math.abs(diffY)\n  let direction\n\n  if(secondObjectByIDMidX > firstObjectByIDMidX){\n    // Right Half\n    if(secondObjectByIDMidY > firstObjectByIDMidY){\n      // Bottom quarter\n      if(diffX > diffY) {\n        direction = \"bottom\"\n      } else {\n        direction = \"right\"\n      }\n    } else {\n      // Top quarter\n      if(absDiffX > absDiffY) {\n        direction = \"right\"\n      } else {\n        direction = \"top\"\n      }\n    }\n  } else {\n    // Left Half\n    if(secondObjectByIDMidY > firstObjectByIDMidY){\n      // Bottom quarter\n      if(absDiffX > absDiffY) {\n        direction = \"left\"\n      } else {\n        direction = \"bottom\"\n      }\n    } else {\n      // Top quarter\n      if(diffX > diffY) {\n        direction = \"left\"\n      } else {\n        direction = \"top\"\n      }\n    }\n  }\n  return direction\n}\n\nfunction drawLine(firstObjectID, secondObjectID, direction){\n  let firstLayerPosX, firstLayerPosY, secondLayerPosX, secondLayerPosY, middlePosX, middlePosY\n  \n  const firstObjectByID = document.getLayerWithID(firstObjectID)\n  const secondObjectByID = document.getLayerWithID(secondObjectID)\n\n  // Drawing a line\n  let path = NSBezierPath.bezierPath()\n  \n  // Based on direction, we need to specify connection points\n  switch(direction) {\n    case \"top\":\n      // First Layer Position Start Point Position\n      firstLayerPosX = firstObjectByID.frame.x+firstObjectByID.frame.width/2\n      firstLayerPosY = firstObjectByID.frame.y\n\n      // Second Layer Position End Point Position\n      secondLayerPosX = secondObjectByID.frame.x+secondObjectByID.frame.width/2\n      secondLayerPosY = secondObjectByID.frame.y+secondObjectByID.frame.height\n\n      // Middle Points\n      middlePosX = (firstLayerPosX + secondLayerPosX)/2\n      middlePosY = (firstLayerPosY + secondLayerPosY)/2\n\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY))\n      path.lineToPoint(NSMakePoint(firstLayerPosX,middlePosY))\n      path.lineToPoint(NSMakePoint(secondLayerPosX,middlePosY))\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY))\n\n      break;\n    case \"right\":\n      // First Layer Position Start Point Position\n      firstLayerPosX = firstObjectByID.frame.x+firstObjectByID.frame.width\n      firstLayerPosY = firstObjectByID.frame.y+firstObjectByID.frame.height/2\n\n      // Second Layer Position End Point Position\n      secondLayerPosX = secondObjectByID.frame.x\n      secondLayerPosY = secondObjectByID.frame.y+secondObjectByID.frame.height/2\n      \n      // Middle Points\n      middlePosX = (firstLayerPosX + secondLayerPosX)/2\n      middlePosY = (firstLayerPosY + secondLayerPosY)/2\n\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY))\n      path.lineToPoint(NSMakePoint(middlePosX,firstLayerPosY))\n      path.lineToPoint(NSMakePoint(middlePosX,secondLayerPosY))\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY))\n\n      break;\n    case \"bottom\":\n      // First Layer Position Start Point Position\n      firstLayerPosX = firstObjectByID.frame.x+firstObjectByID.frame.width/2\n      firstLayerPosY = firstObjectByID.frame.y+firstObjectByID.frame.height\n\n      // Second Layer Position End Point Position\n      secondLayerPosX = secondObjectByID.frame.x+secondObjectByID.frame.width/2\n      secondLayerPosY = secondObjectByID.frame.y\n\n      // Middle Points\n      middlePosX = (firstLayerPosX + secondLayerPosX)/2\n      middlePosY = (firstLayerPosY + secondLayerPosY)/2\n      \n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY))\n      path.lineToPoint(NSMakePoint(firstLayerPosX,middlePosY))\n      path.lineToPoint(NSMakePoint(secondLayerPosX,middlePosY))\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY))\n\n      break;\n    case \"left\":\n      // First Layer Position Start Point Position\n      firstLayerPosX = firstObjectByID.frame.x\n      firstLayerPosY = firstObjectByID.frame.y+firstObjectByID.frame.height/2\n\n      // Second Layer Position End Point Position\n      secondLayerPosX = secondObjectByID.frame.x+secondObjectByID.frame.width\n      secondLayerPosY = secondObjectByID.frame.y+secondObjectByID.frame.height/2\n\n      // Middle Points\n      middlePosX = (firstLayerPosX + secondLayerPosX)/2\n      middlePosY = (firstLayerPosY + secondLayerPosY)/2\n\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY))\n      path.lineToPoint(NSMakePoint(middlePosX,firstLayerPosY))\n      path.lineToPoint(NSMakePoint(middlePosX,secondLayerPosY))\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY))\n\n      break;\n  }\n\n  //TODO: Provide a separate file with all the stylings\n\n  // Painting the line\n  let line = MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(path))\n  \n  // Making middle points rounded\n  let points = line.layers().firstObject().points()\n  points[1].cornerRadius = 20\n  points[2].cornerRadius = 20\n\n  // Providing Settings for the arrow\n  line.setName(\"Arrow\")\n\n  // Styling Border Style\n  let border = line.style().addStylePartOfType(1)\n  border.color = MSColor.colorWithRGBADictionary({r: 0.89, g: 0.89, b: 0.89, a: 1})\n  border.thickness = 2\n  line.style().endMarkerType = 2\n\n  return line\n}\n\nfunction addToArrowsGroup(line){\n  \n  if(currentGroup){\n    // If we already have group\n    currentGroup.addLayers([line])\n\n  } else {\n    // If we don't have a group\n    // Creating a group\n    let group = new Group({\n      parent: currentParentGroup,\n      name: 'Arrows',\n      locked: true,\n      layers: [line]\n    })\n\n    // Moving this group to the bottom of the page\n    group.moveToBack()\n  }\n}\n\nfunction getConnectionsFromPluginData(){\n  if(pluginData){\n    // If we have database, need to get all previous arrowConnections\n    arrowConnections = context.command.valueForKey_onLayer_forPluginIdentifier(\"arrowConnections\", docData, pluginKey)\n\n    for (let i = 0; i < arrowConnections.length; i ++) {\n      connectionsArray.push(arrowConnections[i])\n    }\n  }\n}\n\nfunction  setActiveDirectionSetting (arrowDirectionField){\n  let currentDirection = \"Auto\"\n\n  if(Settings.settingForKey(\"arrowDirection\")){\n    // if there is data in settings\n    currentDirection = Settings.settingForKey(\"arrowDirection\")  \n    \n    if(currentDirection == \"Auto\"){\n      arrowDirectionField.addItemWithTitle(\"Auto\")\n      arrowDirectionField.lastItem().setState(1)\n      arrowDirectionField.addItemWithTitle(\"Right\")\n      arrowDirectionField.lastItem().setState(0)\n      arrowDirectionField.addItemWithTitle(\"Down\")\n      arrowDirectionField.lastItem().setState(0)\n      arrowDirectionField.addItemWithTitle(\"Left\")\n      arrowDirectionField.lastItem().setState(0)\n      arrowDirectionField.addItemWithTitle(\"Up\")\n      arrowDirectionField.lastItem().setState(0)\n    } \n    \n    if(currentDirection == \"Right\"){\n      arrowDirectionField.addItemWithTitle(\"Right\")\n      arrowDirectionField.lastItem().setState(1)\n      arrowDirectionField.addItemWithTitle(\"Down\")\n      arrowDirectionField.lastItem().setState(0)\n      arrowDirectionField.addItemWithTitle(\"Left\")\n      arrowDirectionField.lastItem().setState(0)\n      arrowDirectionField.addItemWithTitle(\"Up\")\n      arrowDirectionField.lastItem().setState(0)\n      arrowDirectionField.addItemWithTitle(\"Auto\")\n      arrowDirectionField.lastItem().setState(0)\n    } \n\n    if(currentDirection == \"Down\"){\n      arrowDirectionField.addItemWithTitle(\"Down\")\n      arrowDirectionField.lastItem().setState(1)\n      arrowDirectionField.addItemWithTitle(\"Left\")\n      arrowDirectionField.lastItem().setState(0)\n      arrowDirectionField.addItemWithTitle(\"Up\")\n      arrowDirectionField.lastItem().setState(0)\n      arrowDirectionField.addItemWithTitle(\"Auto\")\n      arrowDirectionField.lastItem().setState(0)\n      arrowDirectionField.addItemWithTitle(\"Right\")\n      arrowDirectionField.lastItem().setState(0)\n    } \n\n    if(currentDirection == \"Left\"){\n      arrowDirectionField.addItemWithTitle(\"Left\")\n      arrowDirectionField.lastItem().setState(1)\n      arrowDirectionField.addItemWithTitle(\"Up\")\n      arrowDirectionField.lastItem().setState(0)\n      arrowDirectionField.addItemWithTitle(\"Auto\")\n      arrowDirectionField.lastItem().setState(0)\n      arrowDirectionField.addItemWithTitle(\"Right\")\n      arrowDirectionField.lastItem().setState(0)\n      arrowDirectionField.addItemWithTitle(\"Down\")\n      arrowDirectionField.lastItem().setState(0)\n    } \n\n    if(currentDirection == \"Up\"){\n      arrowDirectionField.addItemWithTitle(\"Up\")\n      arrowDirectionField.lastItem().setState(1)\n      arrowDirectionField.addItemWithTitle(\"Auto\")\n      arrowDirectionField.lastItem().setState(0)\n      arrowDirectionField.addItemWithTitle(\"Right\")\n      arrowDirectionField.lastItem().setState(0)\n      arrowDirectionField.addItemWithTitle(\"Down\")\n      arrowDirectionField.lastItem().setState(0)\n      arrowDirectionField.addItemWithTitle(\"Left\")\n      arrowDirectionField.lastItem().setState(0)\n    } \n\n  } else {\n    // Show default\n    arrowDirectionField.addItemWithTitle(\"Auto\")\n    arrowDirectionField.addItemWithTitle(\"Right\")\n    arrowDirectionField.addItemWithTitle(\"Down\")\n    arrowDirectionField.addItemWithTitle(\"Left\")\n    arrowDirectionField.addItemWithTitle(\"Up\")\n  }\n}","module.exports = require(\"sketch\");","module.exports = require(\"sketch/dom\");","module.exports = require(\"sketch/settings\");","module.exports = require(\"sketch/ui\");","module.exports = require(\"util\");"],"sourceRoot":""}