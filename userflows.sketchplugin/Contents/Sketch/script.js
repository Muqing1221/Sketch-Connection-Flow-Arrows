var that=this;function __skpm_run(e,t){that.context=t;var r=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/script.js")}({"./src/script.js":
/*!***********************!*\
  !*** ./src/script.js ***!
  \***********************/
/*! exports provided: default, updateArrows, cleanArrows, settings */function(e,r,n){"use strict";n.r(r),n.d(r,"updateArrows",function(){return g}),n.d(r,"cleanArrows",function(){return b}),n.d(r,"settings",function(){return k});var o,i,a=n(/*! sketch */"sketch"),c=n.n(a),f=(n(/*! util */"util").toArray,n(/*! sketch/ui */"sketch/ui")),s=n(/*! sketch/dom */"sketch/dom").Group,u="flowArrows",l=[],m=[],h=c.a.fromNative(t.document),d=(h.selectedPage,t.document.documentData()),y=t.command.valueForKey_onLayer_forPluginIdentifier("arrowConnections",d,u),P=d.currentPage().currentArtboard()||d.currentPage(),p=t.selection;function g(e){I(),log(m);for(var t=m.length,r=0;r<t;r++)v(m[r].firstObject,m[r].secondObject,m[r].direction,m[r].line);c.a.UI.message("All arrows are updated ðŸš€")}function b(e){c.a.fromNative(e.document);w(),o.ungroup(),e.command.setValue_forKey_onLayer_forPluginIdentifier(null,"arrowConnections",d,u),c.a.UI.message("All Connections are deleted ðŸŽ‰")}function k(e){var t=["Link Arrow","Back Arrow"],r=f.getSelectionFromUser("Please choose link type",t),n=r[2],o=t[r[1]];n&&log(o)}function v(e,r,n,i){if(o=w()){var a=h.getLayerWithID(e),c=h.getLayerWithID(r),f=h.getLayerWithID(i);if(a&&c&&f){f.remove();var s=S(e,r),l=M(e,r,s);j(l),I();var y={firstObject:e,secondObject:r,direction:s,line:l.objectID()};m.push(y),t.command.setValue_forKey_onLayer_forPluginIdentifier(m,"arrowConnections",d,u)}}else log("Else")}function _(e,r){var n=e.objectID(),o=r.objectID(),i=S(n,o),a=M(n,o,i);j(a),I();var c={firstObject:n,secondObject:o,direction:i,line:a.objectID()};m.push(c),t.command.setValue_forKey_onLayer_forPluginIdentifier(m,"arrowConnections",d,u)}function w(){for(var e=0;e<P.layers().count();e++)"Arrows"==P.layers()[e].name()&&(o=P.layers()[e]);return o}function S(e,t){var r=h.getLayerWithID(e),n=h.getLayerWithID(t),o=r.frame.x+r.frame.width/2,i=r.frame.y+r.frame.height/2,a=n.frame.x+n.frame.width/2,c=n.frame.y+n.frame.height/2,f=o-a,s=i-c,u=Math.abs(f),l=Math.abs(s);return a>o?c>i?f>s?"bottom":"right":u>l?"right":"top":c>i?u>l?"left":"bottom":f>s?"left":"top"}function M(e,t,r){var n,o,i,a,c,f,s=h.getLayerWithID(e),u=h.getLayerWithID(t),l=NSBezierPath.bezierPath();switch(r){case"top":n=s.frame.x+s.frame.width/2,o=s.frame.y,c=(n+(i=u.frame.x+u.frame.width/2))/2,f=(o+(a=u.frame.y+u.frame.height))/2,l.moveToPoint(NSMakePoint(n,o)),l.lineToPoint(NSMakePoint(n,f)),l.lineToPoint(NSMakePoint(i,f)),l.lineToPoint(NSMakePoint(i,a));break;case"right":n=s.frame.x+s.frame.width,o=s.frame.y+s.frame.height/2,c=(n+(i=u.frame.x))/2,f=(o+(a=u.frame.y+u.frame.height/2))/2,l.moveToPoint(NSMakePoint(n,o)),l.lineToPoint(NSMakePoint(c,o)),l.lineToPoint(NSMakePoint(c,a)),l.lineToPoint(NSMakePoint(i,a));break;case"bottom":n=s.frame.x+s.frame.width/2,o=s.frame.y+s.frame.height,c=(n+(i=u.frame.x+u.frame.width/2))/2,f=(o+(a=u.frame.y))/2,l.moveToPoint(NSMakePoint(n,o)),l.lineToPoint(NSMakePoint(n,f)),l.lineToPoint(NSMakePoint(i,f)),l.lineToPoint(NSMakePoint(i,a));break;case"left":n=s.frame.x,o=s.frame.y+s.frame.height/2,c=(n+(i=u.frame.x+u.frame.width))/2,f=(o+(a=u.frame.y+u.frame.height/2))/2,l.moveToPoint(NSMakePoint(n,o)),l.lineToPoint(NSMakePoint(c,o)),l.lineToPoint(NSMakePoint(c,a)),l.lineToPoint(NSMakePoint(i,a))}var m=MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(l)),d=m.layers().firstObject().points();d[1].cornerRadius=20,d[2].cornerRadius=20,m.setName("Arrow");var y=m.style().addStylePartOfType(1);return y.color=MSColor.colorWithRGBADictionary({r:.89,g:.89,b:.89,a:1}),y.thickness=2,m.style().endMarkerType=2,m}function j(e){o?o.addLayers([e]):new s({parent:P,name:"Arrows",locked:!0,layers:[e]}).moveToBack()}function I(){if(y){l=t.command.valueForKey_onLayer_forPluginIdentifier("arrowConnections",d,u);for(var e=0;e<l.length;e++)m.push(l[e])}}r.default=function(e){if(o=w(),p.count()>1){i=p.firstObject();for(var t=0;t<p.count();t++)p[t].objectID()!=i.objectID()&&_(i,p[t])}else c.a.UI.message("Please select more than two layers")}},sketch:
/*!*************************!*\
  !*** external "sketch" ***!
  \*************************/
/*! no static exports found */function(e,t){e.exports=require("sketch")},"sketch/dom":
/*!*****************************!*\
  !*** external "sketch/dom" ***!
  \*****************************/
/*! no static exports found */function(e,t){e.exports=require("sketch/dom")},"sketch/ui":
/*!****************************!*\
  !*** external "sketch/ui" ***!
  \****************************/
/*! no static exports found */function(e,t){e.exports=require("sketch/ui")},util:
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/*! no static exports found */function(e,t){e.exports=require("util")}});"default"===e&&"function"==typeof r?r(t):r[e](t)}that.onRun=__skpm_run.bind(this,"default"),that.updateArrows=__skpm_run.bind(this,"updateArrows"),that.cleanArrows=__skpm_run.bind(this,"cleanArrows"),that.settings=__skpm_run.bind(this,"settings");